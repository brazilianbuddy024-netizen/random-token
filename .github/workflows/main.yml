name: Generate Random Tokens

on:
  schedule:
    - cron: '*/30 * * * * *'  # Runs every 30 seconds
  workflow_dispatch:

jobs:
  generate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Generate tokens
        run: |
          cat > tokens.json << 'EOF'
          {
            "tokens": [
              {"name": "Solana", "price": 0.001234, "change": 5.2},
              {"name": "Raydium", "price": 0.002345, "change": -2.1},
              {"name": "Jupiter", "price": 0.003456, "change": 8.3}
            ]
          }
          EOF
          
      - name: Commit and push
        run: |
          git config --global user.name "github-actions"
          git config --global user.email "actions@github.com"
          git add tokens.json
          git diff --quiet && git diff --staged --quiet || git commit -m "Update random tokens"
          git push
